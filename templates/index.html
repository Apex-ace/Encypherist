{% extends "base.html" %}

{% block title %}Welcome{% endblock %}

{% block extra_head %}
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
<style>
    #vanta-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
    }

    .moving-lines {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
    }

    .line {
        position: absolute;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        height: 2px;
        width: 100%;
        opacity: 0.1;
        animation: moveLine 8s linear infinite;
    }

    .line:nth-child(1) {
        top: 20%;
        animation-delay: 0s;
    }

    .line:nth-child(2) {
        top: 40%;
        animation-delay: 2s;
    }

    .line:nth-child(3) {
        top: 60%;
        animation-delay: 4s;
    }

    .line:nth-child(4) {
        top: 80%;
        animation-delay: 6s;
    }

    @keyframes moveLine {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

    .glass-card {
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(20px);
        border: 1px solid var(--primary-color);
        border-radius: 24px;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
        perspective: 1000px;
    }

    .glass-card:hover {
        transform: translateY(-10px) rotateX(10deg) rotateY(10deg);
        border-color: var(--primary-color);
        box-shadow: 
            0 0 20px rgba(0, 255, 0, 0.2),
            0 0 40px rgba(0, 255, 0, 0.1);
    }

    .floating {
        animation: floating 6s ease-in-out infinite;
        transform-style: preserve-3d;
    }

    @keyframes floating {
        0% { transform: translateY(0px) rotateY(0deg); }
        50% { transform: translateY(-20px) rotateY(180deg); }
        100% { transform: translateY(0px) rotateY(360deg); }
    }

    .stat-card {
        background: rgba(0, 0, 0, 0.8);
        border: 1px solid var(--primary-color);
        border-radius: 16px;
        padding: 2rem;
        text-align: center;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stat-card:hover {
        transform: translateY(-10px);
        border-color: var(--primary-color);
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
    }

    .tech-badge {
        background: rgba(0, 255, 0, 0.1);
        border: 1px solid var(--primary-color);
        border-radius: 20px;
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        color: var(--primary-color);
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
        display: inline-block;
    }

    .gradient-border {
        position: relative;
        border-radius: 24px;
        padding: 1px;
        background: linear-gradient(45deg, #00ff00, #00ffff, #00ff00);
        background-size: 200% 200%;
        animation: gradient 5s ease infinite;
    }

    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }
        
        .hero-description {
            font-size: 1rem;
        }
        
        .floating {
            animation: none;
            transform: none;
        }
        
        .lottie-container {
            height: 300px;
        }
    }

    /* Solar System Animation */
    .solar-system {
        position: relative;
        width: 100px;
        height: 100px;
    }

    .sun {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 20px;
        height: 20px;
        background: #FFD700;
        border-radius: 50%;
        box-shadow: 0 0 20px #FFD700;
        transform: translate(-50%, -50%);
    }

    .orbit {
        position: absolute;
        top: 50%;
        left: 50%;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    .planet {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 8px;
        height: 8px;
        background: var(--primary-color);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        animation: orbit linear infinite;
    }

    .orbit:nth-child(2) { width: 60px; height: 60px; }
    .orbit:nth-child(3) { width: 100px; height: 100px; }
    .orbit:nth-child(4) { width: 140px; height: 140px; }

    .planet:nth-child(1) { animation-duration: 3s; }
    .planet:nth-child(2) { animation-duration: 5s; }
    .planet:nth-child(3) { animation-duration: 7s; }

    @keyframes orbit {
        from { transform: rotate(0deg) translateX(30px) rotate(0deg); }
        to { transform: rotate(360deg) translateX(30px) rotate(-360deg); }
    }

    /* Computer Line Drawing Animation */
    .computer-drawing {
        position: relative;
        width: 150px;
        height: 100px;
    }

    .computer-line {
        stroke: var(--primary-color);
        stroke-width: 2;
        fill: none;
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: drawLine 3s ease forwards infinite;
    }

    @keyframes drawLine {
        to {
            stroke-dashoffset: 0;
        }
    }

    .animations-container {
        position: absolute;
        display: inline-flex;
        align-items: center;
        gap: 20px;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        height: 50px;
    }

    @media (max-width: 768px) {
        .animations-container {
            position: relative;
            right: auto;
            top: auto;
            transform: none;
            margin-top: 20px;
            justify-content: center;
        }
    }
</style>
{% endblock %}

{% block content %}
<div id="vanta-bg"></div>
<div class="moving-lines">
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
</div>

<!-- Hero Section -->
<section class="min-h-screen flex items-center -mt-24">
    <div class="container mx-auto px-4 sm:px-6">
        <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-center relative">
            <div class="space-y-6 md:space-y-8">
                <div class="logo-container mb-6">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" 
                         alt="Encypherist Logo" 
                         class="h-16 md:h-20 animate-pulse">
                </div>
                <div class="space-y-2 md:space-y-4">
                    <span class="tech-badge">AI</span>
                    <span class="tech-badge">IoT</span>
                    <span class="tech-badge">Cybersecurity</span>
                </div>
                <h1 class="hero-title text-4xl md:text-7xl font-extrabold leading-tight">
                    Innovate
                    <div class="relative">
                        <span class="gradient-text block">Tech Events</span>
                        <div class="animations-container">
                            <div class="solar-system">
                                <div class="sun"></div>
                                <div class="orbit">
                                    <div class="planet"></div>
                                </div>
                                <div class="orbit">
                                    <div class="planet"></div>
                                </div>
                                <div class="orbit">
                                    <div class="planet"></div>
                                </div>
                            </div>
                            <div class="computer-drawing">
                                <svg viewBox="0 0 300 200">
                                    <path class="computer-line" d="M50,50 L250,50 L250,150 L50,150 Z"/>
                                    <path class="computer-line" d="M70,70 L230,70 L230,130 L70,130 Z"/>
                                    <path class="computer-line" d="M120,150 L180,150 L200,180 L100,180 Z"/>
                                    <path class="computer-line" d="M80,160 L220,160 L230,170 L70,170 Z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    For Tomorrow
                </h1>
                <p class="hero-description text-lg md:text-xl text-gray-400 leading-relaxed">
                    Encypherist is your gateway to cutting-edge tech events. From AI workshops to IoT hackathons and cybersecurity challenges, join us in shaping the future of technology. Connect with industry experts, collaborate with peers, and transform your ideas into reality.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 sm:gap-6">
                    <a href="{{ url_for('home') }}" class="btn-primary text-center">
                        Explore Tech Events
                    </a>
                    <a href="{{ url_for('register') }}?role=organizer" class="btn-secondary text-center">
                        Host an Event
                    </a>
                </div>
            </div>
            <div class="relative order-first md:order-last">
                <div class="floating">
                    <div class="lottie-container">
                        <lottie-player
                            src="https://assets2.lottiefiles.com/packages/lf20_uwh5hj2q.json"
                            background="transparent"
                            speed="1"
                            style="width: 100%; height: 400px;"
                            loop
                            autoplay>
                        </lottie-player>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Announcements Section -->
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Announcements</h3>
                </div>
                <div class="card-body">
                    {% if announcements %}
                        {% for announcement in announcements %}
                            <div class="announcement-item mb-3">
                                <h4>{{ announcement.title }}</h4>
                                <p class="text-muted">Posted on {{ announcement.created_at.strftime('%B %d, %Y') }}</p>
                                <div class="announcement-content">
                                    {{ announcement.content }}
                                </div>
                                {% if announcement.image_url %}
                                    <img src="{{ url_for('static', filename=announcement.image_url) }}" 
                                         alt="Announcement image" 
                                         class="img-fluid mt-2">
                                {% endif %}
                            </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted">No announcements at the moment.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Featured Events Section -->
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">Featured Events</h2>
        </div>
        {% for event in featured_events %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">{{ event.title }}</h5>
                    <p class="card-text">{{ event.description[:100] }}...</p>
                    <p class="card-text">
                        <small class="text-muted">
                            <i class="fas fa-calendar"></i> {{ event.date.strftime('%B %d, %Y') }}<br>
                            <i class="fas fa-map-marker-alt"></i> {{ event.location }}<br>
                            <i class="fas fa-ticket-alt"></i> ‚Çπ{{ "%.2f"|format(event.price) }}
                        </small>
                    </p>
                    <a href="{{ url_for('event_details', event_id=event.id) }}" class="btn btn-primary">Learn More</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Tech Categories Section -->
<section id="tech-categories" class="py-12 md:py-20 bg-black bg-opacity-50">
    <div class="container mx-auto px-4 sm:px-6">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 md:mb-12 text-center gradient-text">Tech Categories</h2>
        <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8">
            <div class="stat-card">
                <div class="text-4xl mb-4">ü§ñ</div>
                <h3 class="text-lg md:text-xl font-bold mb-2">Artificial Intelligence</h3>
                <p class="text-sm md:text-base text-gray-400">Explore machine learning, deep learning, and AI applications</p>
            </div>
            <div class="stat-card">
                <div class="text-4xl mb-4">üåê</div>
                <h3 class="text-lg md:text-xl font-bold mb-2">Internet of Things</h3>
                <p class="text-sm md:text-base text-gray-400">Build and innovate with connected devices and sensors</p>
            </div>
            <div class="stat-card">
                <div class="text-4xl mb-4">üîí</div>
                <h3 class="text-lg md:text-xl font-bold mb-2">Cybersecurity</h3>
                <p class="text-sm md:text-base text-gray-400">Learn about network security, ethical hacking, and protection</p>
            </div>
        </div>
    </div>
</section>

<!-- Why Choose Us Section -->
<section id="why-choose-us" class="py-12 md:py-20">
    <div class="container mx-auto px-4 sm:px-6">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 md:mb-12 text-center gradient-text">Why Choose Encypherist</h2>
        <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8">
            <div class="glass-card p-4 md:p-6">
                <div class="text-4xl mb-4">üéì</div>
                <h3 class="text-lg md:text-xl font-bold mb-2">Expert-Led Sessions</h3>
                <p class="text-sm md:text-base text-gray-400">Learn from industry professionals and tech experts</p>
            </div>
            <div class="glass-card p-4 md:p-6">
                <div class="text-4xl mb-4">ü§ù</div>
                <h3 class="text-lg md:text-xl font-bold mb-2">Networking</h3>
                <p class="text-sm md:text-base text-gray-400">Connect with like-minded tech enthusiasts</p>
            </div>
            <div class="glass-card p-4 md:p-6">
                <div class="text-4xl mb-4">üí°</div>
                <h3 class="text-lg md:text-xl font-bold mb-2">Innovation Hub</h3>
                <p class="text-sm md:text-base text-gray-400">Access to latest tech trends and resources</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    VANTA.NET({
        el: "#vanta-bg",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x4a4a4a,
        backgroundColor: 0x0a0a0a,
        points: 8.00,
        maxDistance: 15.00,
        spacing: 25.00,
        showDots: false,
        lineColor: 0x2a2a2a,
        lineWidth: 1.00,
        lineDistance: 150.00,
        lineRadius: 5.00,
        lineOpacity: 0.2
    })
</script>

<!-- Add this script at the end of your body -->
<script>
    // Optional: Add interactive elements
    document.querySelector('.solar-system').addEventListener('mouseover', function() {
        this.style.transform = 'scale(1.1)';
    });

    document.querySelector('.solar-system').addEventListener('mouseout', function() {
        this.style.transform = 'scale(1)';
    });

    // Add random twinkling stars
    function createStars() {
        const starsContainer = document.createElement('div');
        starsContainer.style.position = 'fixed';
        starsContainer.style.top = '0';
        starsContainer.style.left = '0';
        starsContainer.style.width = '100%';
        starsContainer.style.height = '100%';
        starsContainer.style.zIndex = '-1';
        document.body.appendChild(starsContainer);

        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.style.position = 'absolute';
            star.style.width = '2px';
            star.style.height = '2px';
            star.style.backgroundColor = '#FFF';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animation = `twinkle ${Math.random() * 3 + 1}s infinite`;
            starsContainer.appendChild(star);
        }
    }

    createStars();
</script>

<style>
    @keyframes twinkle {
        0% { opacity: 0; }
        50% { opacity: 1; }
        100% { opacity: 0; }
    }
</style>
{% endblock %}
